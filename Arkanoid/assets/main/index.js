System.register("chunks:///_virtual/BallControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameManager.ts"],(function(i){var e,t,n,o,l,r,s,a,c,h,d,p,u,g,y,f,b;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){l=i.cclegacy,r=i._decorator,s=i.Node,a=i.Vec2,c=i.RigidBody2D,h=i.UITransform,d=i.Collider2D,p=i.Contact2DType,u=i.Sprite,g=i.Color,y=i.Component},function(i){f=i.Brick},function(i){b=i.GameManager}],execute:function(){var P,m,v,C,V,N;l._RF.push({},"780b8UQt/xPc7EEx3nPWb9J","BallControl",void 0);var S=r.ccclass,B=r.property;i("BallControl",(P=S("BallControl"),m=B(s),P((V=e((C=function(i){function e(){for(var e,t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];return e=i.call.apply(i,[this].concat(l))||this,n(e,"paddleNode",V,o(e)),n(e,"speed",N,o(e)),e.velocityBeforeHit=new a,e.isPiercing=!1,e.isPlaying=!1,e.rb=null,e.yOffset=0,e}t(e,i);var l=e.prototype;return l.start=function(){if(this.rb=this.getComponent(c),this.paddleNode){var i=this.paddleNode.getComponent(h).contentSize.height,e=this.getComponent(h).contentSize.height/2;this.yOffset=i/2+e+2}var t=this.getComponent(d);t&&(t.on(p.BEGIN_CONTACT,this.onBeginContact,this),t.on(p.PRE_SOLVE,this.onPreSolve,this))},l.update=function(i){if(!this.isPlaying&&this.paddleNode){var e=this.paddleNode.position;this.node.setPosition(e.x,e.y+20,0)}},l.inheritFrom=function(i){this.speed=i.speed,i.isPiercing&&this.enablePiercing(),this.rb&&this.rb.linearVelocity.length()>0&&(this.rb.linearVelocity=this.rb.linearVelocity.normalize().multiplyScalar(this.speed))},l.onPreSolve=function(i,e,t){this.isPiercing&&2===e.tag&&(t.disabled=!0)},l.speedUp=function(){var i=this;if(this.rb||(this.rb=this.getComponent(c)),this.rb&&(this.speed=25,this.isPlaying)){if(this.rb.linearVelocity.length()>0){var e=this.rb.linearVelocity.clone();e.normalize().multiplyScalar(this.speed),this.rb.linearVelocity=e}this.scheduleOnce((function(){if(i.node&&i.node.isValid&&(i.speed=20,i.isPlaying&&i.rb&&i.rb.linearVelocity.length()>0)){var e=i.rb.linearVelocity.clone();e.normalize().multiplyScalar(i.speed),i.rb.linearVelocity=e}}),5)}},l.enablePiercing=function(){var i=this;this.isPiercing=!0;var e=this.getComponent(u);e&&(e.color=g.RED),this.scheduleOnce((function(){i.isPiercing=!1,e&&(e.color=g.WHITE)}),5)},l.launchBall=function(){this.isPlaying||(this.isPlaying=!0,this.rb.linearVelocity=new a(.2,1).multiplyScalar(this.speed))},l.resetState=function(){if(this.isPlaying=!1,this.rb||(this.rb=this.getComponent(c)),this.rb&&(this.rb.linearVelocity=a.ZERO,this.rb.angularVelocity=0),this.paddleNode){var i=this.paddleNode.position;this.node.setPosition(i.x,i.y+20,0)}},l.onBeginContact=function(i,e,t){if(e.node===this.paddleNode)this.hitPaddle(e);else if(2===e.tag){var n=e.getComponent(f);n&&n.onHit()}else 3===e.tag&&b.instance&&b.instance.onBallFellIntoDeadZone(this.node);3!==e.tag&&b.instance&&b.instance.playSoundHit()},l.hitPaddle=function(i){var e=this.node.worldPosition,t=this.paddleNode.worldPosition,n=this.paddleNode.getComponent(h).contentSize.width*this.paddleNode.scale.x,o=(e.x-t.x)/(n/2);o>1&&(o=1),o<-1&&(o=-1);var l=new a(o,1).normalize();this.rb.linearVelocity=l.multiplyScalar(this.speed)},e}(y)).prototype,"paddleNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(C.prototype,"speed",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),v=C))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(n){var t,e,i,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Component},function(n){r=n.GameManager}],execute:function(){var c;e._RF.push({},"6233de12w9ATbNLiRETht+8","Brick",void 0);var s=i.ccclass;i.property,n("Brick",s("Brick")(c=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.onHit=function(){r.instance&&(r.instance.onBrickDestroyed(),r.instance.spawnItem(this.node.position)),this.node.destroy()},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PaddleController.ts","./BallControl.ts","./Item.ts"],(function(e){var i,t,n,o,r,a,l,s,c,u,f,h,p,d,b,m,g,y,v,S,P,C,w,I;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.AudioClip,s=e.Prefab,c=e.Node,u=e.Label,f=e.SpriteFrame,h=e.PhysicsSystem2D,p=e.director,d=e.AudioSource,b=e.instantiate,m=e.RigidBody2D,g=e.Vec2,y=e.UITransform,v=e.Sprite,S=e.math,P=e.Component},function(e){C=e.PaddleControl},function(e){w=e.BallControl},function(e){I=e.ItemType}],execute:function(){var L,B,z,k,x,D,M,O,_,G,U,V,E,H,F,R,N,A,W,T,j,q,J,Q,Z,K,X,Y,$,ee,ie,te,ne,oe,re,ae,le,se;r._RF.push({},"dcd88v2yfRHpJq1izWUbfEQ","GameManager",void 0);var ce=a.ccclass,ue=a.property;e("GameManager",(L=ce("GameManager"),B=ue({type:l}),z=ue({type:l}),k=ue({type:l}),x=ue({type:l}),D=ue([s]),M=ue(s),O=ue(s),_=ue(c),G=ue(c),U=ue(u),V=ue(c),E=ue(s),H=ue(c),F=ue(c),R=ue(u),N=ue(u),A=ue([f]),L(((se=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"bgmClip",j,o(i)),n(i,"sfxHit",q,o(i)),n(i,"sfxItem",J,o(i)),n(i,"sfxDie",Q,o(i)),i.audioSource=null,n(i,"itemPrefabs",Z,o(i)),n(i,"brickPrefab",K,o(i)),n(i,"ballPrefab",X,o(i)),n(i,"paddleNode",Y,o(i)),n(i,"brickContainer",$,o(i)),n(i,"scoreLabel",ee,o(i)),n(i,"livesLayout",ie,o(i)),n(i,"lifeIconPrefab",te,o(i)),n(i,"winPanel",ne,o(i)),n(i,"losePanel",oe,o(i)),n(i,"finalScoreLabel_Win",re,o(i)),n(i,"finalScoreLabel_Lose",ae,o(i)),n(i,"brickImages",le,o(i)),i.score=0,i.lives=3,i.totalBricks=0,i}t(i,e);var r=i.prototype;return r.onLoad=function(){i.instance=this,h.instance.enable=!0,p.resume(),this.audioSource=this.getComponent(d),this.audioSource||(this.audioSource=this.addComponent(d))},r.start=function(){this.setupUI(),this.generateLevel(),this.spawnBall(),this.playBGM()},r.playBGM=function(){this.bgmClip&&this.audioSource&&(this.audioSource.stop(),this.audioSource.clip=this.bgmClip,this.audioSource.loop=!0,this.audioSource.play(),this.audioSource.volume=.05)},r.playSoundHit=function(){this.sfxHit&&this.audioSource.playOneShot(this.sfxHit,.5)},r.playSoundItem=function(){this.sfxItem&&this.audioSource.playOneShot(this.sfxItem,.3)},r.playSoundDie=function(){this.sfxDie&&this.audioSource.playOneShot(this.sfxDie,.5)},r.setupUI=function(){this.score=0,this.updateScoreUI(),this.livesLayout.destroyAllChildren();for(var e=0;e<this.lives;e++){var i=b(this.lifeIconPrefab);this.livesLayout.addChild(i)}},r.spawnItem=function(e){if(Math.random()<.2){var i=Math.floor(Math.random()*this.itemPrefabs.length),t=this.itemPrefabs[i];if(t){var n=b(t);n.active=!1,n.parent=this.node.parent,n.position=e,this.scheduleOnce((function(){n&&n.isValid&&(n.active=!0)}),0)}}},r.activateItem=function(e){var i=this,t=this.node.parent.getComponentsInChildren(w);if(t.some((function(e){return e.isPlaying})))switch(console.log("Ăn item loại: "+e),this.playSoundItem(),e){case I.MultiBall:t.forEach((function(e){e.isPlaying&&i.spawnExtraBall(e.node.position,e)}));break;case I.SpeedUp:t.forEach((function(e){e.speedUp()}));break;case I.Piercing:t.forEach((function(e){e.enablePiercing()}))}else console.log("Bóng chưa bắn, item rơi mất tác dụng!")},r.spawnExtraBall=function(e,i){var t=b(this.ballPrefab);t.active=!1,t.parent=this.node.parent,t.position=e,this.scheduleOnce((function(){if(t.isValid){t.active=!0;var e=t.getComponent(m),n=t.getComponent(w);if(e){var o=Math.random()>.5?1:-1;e.linearVelocity=new g(o,1).normalize().multiplyScalar(20)}n&&i&&n.inheritFrom(i)}}),0)},r.addScore=function(e){this.score+=e,this.updateScoreUI()},r.onBrickDestroyed=function(){this.addScore(10),this.totalBricks--,this.totalBricks<=0&&this.gameOver(!0)},r.onBallFellIntoDeadZone=function(e){e.active=!1;var i=this.node.parent.getComponentsInChildren(w),t=0;i.forEach((function(i){i.node&&i.node.isValid&&i.node.active&&i.node!==e&&t++})),console.log("Bóng rớt! Số bóng còn lại thực tế: "+t),this.scheduleOnce((function(){e&&e.isValid&&e.destroy()}),0),0===t&&this.onBallDie()},r.onBallDie=function(){this.lives--,this.playSoundDie(),this.livesLayout.children.length>0&&this.livesLayout.children[this.livesLayout.children.length-1].destroy(),this.lives>0?this.spawnBall():this.gameOver(!1)},r.spawnBall=function(){var e=this,i=b(this.ballPrefab);i.active=!1,i.parent=this.node.parent,i.setPosition(0,-200,0),this.scheduleOnce((function(){i.isValid&&(i.active=!0,e.scheduleOnce((function(){if(i.isValid){var t=e.paddleNode.getComponent(C);t&&t.setBall(i)}}),0))}),0)},r.gameOver=function(e){this.stopGame(),e?(this.winPanel.active=!0,this.finalScoreLabel_Win.string="Score: "+this.score):(this.losePanel.active=!0,this.finalScoreLabel_Lose.string="Score: "+this.score)},r.stopGame=function(){this.node.parent.getComponentsInChildren(w).forEach((function(e){e.node&&e.node.isValid&&e.node.destroy()}));var e=this.paddleNode.getComponent(C);e&&(e.enabled=!1),h.instance.enable=!1,p.pause()},r.onReplayBtnClick=function(){h.instance.enable=!0,p.loadScene("MainGame"),p.resume()},r.updateScoreUI=function(){this.scoreLabel&&(this.scoreLabel.string="Score: "+this.score)},r.generateLevel=function(){var e=b(this.brickPrefab),i=e.getComponent(y).contentSize.width,t=e.getComponent(y).contentSize.height;e.destroy();for(var n=(750-(9*i+40))/2+i/2,o=920-2*t,r=0;r<6;r++)for(var a=0;a<9;a++){var l=b(this.brickPrefab);this.brickContainer.addChild(l);var s=l.getComponent(v);if(s){var c=S.randomRangeInt(0,this.brickImages.length);s.spriteFrame=this.brickImages[c]}this.totalBricks++;var u=n+a*(i+5),f=o-r*(t+5);l.setPosition(l.position.x+u,l.position.y+f,0)}},i}(P)).instance=null,j=i((T=se).prototype,"bgmClip",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(T.prototype,"sfxHit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(T.prototype,"sfxItem",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(T.prototype,"sfxDie",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(T.prototype,"itemPrefabs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=i(T.prototype,"brickPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(T.prototype,"ballPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(T.prototype,"paddleNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(T.prototype,"brickContainer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(T.prototype,"scoreLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(T.prototype,"livesLayout",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=i(T.prototype,"lifeIconPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i(T.prototype,"winPanel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i(T.prototype,"losePanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i(T.prototype,"finalScoreLabel_Win",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=i(T.prototype,"finalScoreLabel_Lose",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=i(T.prototype,"brickImages",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=T))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var t,n,i,r,o,a,l,c,p,s,u,y,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Enum,c=e.RigidBody2D,p=e.Vec2,s=e.Collider2D,u=e.Contact2DType,y=e.Component},function(e){f=e.GameManager}],execute:function(){var d,g,h,m,v,B;o._RF.push({},"c8d2bQrI9BNl5IyFbvB4Xgh","Item",void 0);var I=a.ccclass,b=a.property,C=e("ItemType",function(e){return e[e.MultiBall=0]="MultiBall",e[e.SpeedUp=1]="SpeedUp",e[e.Piercing=2]="Piercing",e}({}));l(C);e("Item",(d=I("Item"),g=b({type:C}),d((v=t((m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"type",v,r(t)),i(t,"fallSpeed",B,r(t)),t}n(t,e);var o=t.prototype;return o.start=function(){var e=this.getComponent(c);e&&(e.linearVelocity=new p(0,-this.fallSpeed));var t=this.getComponent(s);t&&t.on(u.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(e,t,n){1===t.tag?(f.instance&&f.instance.activateItem(this.type),this.node.destroy()):3===t.tag&&this.node.destroy()},t}(y)).prototype,"type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.MultiBall}}),B=t(m.prototype,"fallSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),h=m))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BallControl.ts","./Brick.ts","./GameManager.ts","./Item.ts","./PaddleController.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PaddleController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BallControl.ts"],(function(t){var o,n,e,i,l,r,s,a,c,h,u,d,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,s=t.Vec2,a=t.view,c=t.UITransform,h=t.Node,u=t.math,d=t.Component},function(t){p=t.BallControl}],execute:function(){var C,T,f,b,v,y;l._RF.push({},"1b9f7byh7lNmpz9zsmaYyGx","PaddleController",void 0);var m=r.ccclass,g=r.property;t("PaddleControl",(C=m("PaddleControl"),T=g(p),C((v=o((b=function(t){function o(){for(var o,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return o=t.call.apply(t,[this].concat(l))||this,e(o,"ballControl",v,i(o)),e(o,"speed",y,i(o)),o.xLimit=0,o.startTouchPos=new s,o}n(o,t);var l=o.prototype;return l.start=function(){var t=a.getVisibleSize().width,o=this.getComponent(c).contentSize.width;this.xLimit=t/2-o/2.7,this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},l.setBall=function(t){this.ballControl=t.getComponent(p),this.ballControl&&(this.ballControl.paddleNode=this.node,this.ballControl.resetState())},l.onTouchStart=function(t){this.startTouchPos=t.getUILocation()},l.onTouchMove=function(t){var o=t.getUIDelta(),n=this.node.position,e=n.x+o.x;e=u.clamp(e,-this.xLimit,this.xLimit),this.node.setPosition(e,n.y,n.z)},l.onTouchEnd=function(t){var o=t.getUILocation();s.distance(this.startTouchPos,o)<10&&this.ballControl&&this.ballControl.launchBall()},o}(d)).prototype,"ballControl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(b.prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),f=b))||f));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});